<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>(dragsubil&#39;s blog): Thanking the Reddit bots for their hard work</title>
    <link rel="canonical" href="http://dragsubil.github.io/posts/2016-12-10-botwhothanksbots/">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="icon" 
      type="image/png" 
      href="/img/favicon.png"> 
    <link href="/css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">(dragsubil&#39;s blog) 
            <span class = "subtitle">(or is it?)</span></a>

        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li
                ><a href="/archives/">Archives</a></li>
                
                <li
                >
                <a href="/pages/about/">About</a>
                </li>
                
                <li><a href="/feed.xml">RSS</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                        Other Stuff <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li class="dropdown-header">Links</li>
                        
                        <li><a href="/pages/p5js-sketches/">p5.js Sketches</a></li>
                        

                    </ul>
                </li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">


    <div class="row">
        <div class="col-lg-9">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">

        
    </div>
    <h2>Thanking the Reddit bots for their hard work</h2>
   <div id="postdate">Saturday, 10 December, 2016</div>
</div>
<div id="postcontent">
    
    <p>You know, I was supposed to be learning <a href='http://www.sqlalchemy.org/'>SQLAlchemy</a> in the hopes adding  something employable my resume (all I have right now is 'knows some python'). But I end up messing around on reddit instead. <em>Sigh</em>.</p><p>Anyway, if you've used reddit for any length of time, you've probably noticed a few bot accounts. They're usually there to perform some tasks on behalf of the humans. <a href='https://www.reddit.com/r/AutoModerator/'>Automoderator</a> is ubiquitous throughout reddit. <a href='https://www.reddit.com/r/remindmebot'>RemindMeBot</a> can be called on demand to set a reminder for yourself by calling for it in  the comments or via PM. Those are just a couple of the many throughout  reddit.</p><p>Despite their status as automated servants, bots deserve some gratitude too. (If you're one to disagree, we'll see how much mercy the machines will have for you when Skynet takes over the world). So I wrote a bot that thanks other bots on reddit (the machines won't have any mercy for me either, since I'm <del>enslaving</del> creating a bot to do the thanking).</p><p>The easiest way to write a reddit bot in python is by using the <a href='https://github.com/praw-dev/praw'>Python Reddit API Wrapper</a>, PRAW for short. In the interest of avoiding writing  redundant information, you should atleast read the <a href='https://praw.readthedocs.io/en/latest/getting_started/quick_start.html'>quickstart</a> in the  PRAW docs. (This blog was written for v4.0 of PRAW, so if you have an older version it won't work).</p><p>The bot works by iterating through a list of bot usernames over and over at the rate of one bot thanked every 10 minutes. The 10 minute timeout is  because reddit doesn't allow an account to post on a subreddit more than once within that time period unless the account is an active participant. Here's what the loop looks like:</p><pre><code class="python">
botlist = &#91;'RemindMeBot', 'AutoModerator', 'TotesMessenger', 'samacharbot2'&#93;

for botname in botlist:

    reddit = praw.Reddit&#40;'thankerbot'&#41;
    bot&#95;object = reddit.redditor&#40;botname&#41;
    bot&#95;new&#95;submissions = bot&#95;object.new&#40;limit=1&#41;

    for submission in bot&#95;new&#95;submissions:
        # Checking if the submission is a comment we can reply to
        if isinstance&#40;submission, praw.models.reddit.comment.Comment&#41;:
            post&#95;reply&#40;botname, submission&#41;
            time.sleep&#40;600&#41; # waiting 10 minutes 
                            # because reddit doesn't want spam

</code></pre><p>Having created <code>reddit</code> as our user agent, we now create a <code>Reddit.redditor</code> object to represent the bot we are going to send our thank you message. You'll notice that our user agent is initialized with only one argument. This is because I've already set up a <code>praw.ini</code> file that contains the rest of the information (Instructions <a href='https://praw.readthedocs.io/en/latest/getting_started/configuration/prawini.html'>here</a>). </p><p>We now retrieve their latest submissions with <code>bot&#95;object.new&#40;limit=x&#41;</code>, where <code>x</code> is the number of posts we want. Since we pass <code>limit=1</code>, we only get their latest post. This returns a generator object that we can iterate through. Each submission is then checked to see if it is a <code>Comment</code> object in order for our bot to reply to it. </p><p>Our <code>post&#95;reply&#40;&#41;</code> function looks like this:</p><pre><code class="python">
comment&#95;string = &quot;&quot;&quot;
Thank you {}!
----

&#94;&#40;Because bots deserve gratitude.&#41;
&#91;Report an issue&#93;&#40;https://github.com/dragsubil/botWhoThanksBots/issues&#41;

&quot;&quot;&quot;

def post&#95;reply&#40;botname, comment&#41;:
    try:
       comment.reply&#40;comment&#95;string.format&#40;botname&#41;&#41;
    except Exception as e:
        print&#40;&quot;Moving to the next bot because exception occured:&quot;, str&#40;e&#41;&#41;
        return

    print&#40;&quot;Thanked {}. id: {}&quot;.format&#40;botname, comment.id&#41;&#41;

</code></pre><p>We try to thank the bot by calling the <code>reply</code> function on our comment object. Sometimes you might get an APIException because reddit couldn't process our request for some reason but we handle it and keep chugging  away.</p><p>And that's pretty much it. You can find the code <a href='https://github.com/dragsubil/botWhoThanksBots'>here</a> and you can say  hello to <a href='https://www.reddit.com/user/botWhoThanksBots/'>/u/botWhoThanksBots</a> on Reddit. Though I don't know how long I'll keep it active. It's already been banned from 4 subreddits, so who knows what will happen!</p>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/tags/python/">python</a>
    
    <a href="/tags/praw/">praw</a>
    
</div>


    <div id="prev-next">
        
        <a href="/posts/2016-12-19-books-read/">&laquo; Books I&#39;ve read this past week</a>
        
        
        <a class="right" href="/posts/2016-12-07-the-monster-sneaks-up/">The monster that sneaks up on you &raquo;</a>
        
    </div>

    


</div>

            </div>
        </div>

        <div class="col-md-3">
            <div id="sidebar">
                
                <div id="recent">
                    <h3>Recent Posts</h3>
                    <ul>
                        
                        <li><a href="/posts/2016-12-19-books-read/">Books I&#39;ve read this past week</a></li>
                        
                        <li><a href="/posts/2016-12-10-botwhothanksbots/">Thanking the Reddit bots for their hard work</a></li>
                        
                        <li><a href="/posts/2016-12-07-the-monster-sneaks-up/">The monster that sneaks up on you</a></li>
                        
                    </ul>
                </div>
                
                
                <div id="tags">
                    <h3>Tags</h3>
                    <ul>
                        
                        <li><a href="/tags/books/">books</a></li>
                        
                        <li><a href="/tags/python/">python</a></li>
                        
                        <li><a href="/tags/praw/">praw</a></li>
                        
                        <li><a href="/tags/misc/">misc</a></li>
                        
                        <li><a href="/tags/vim/">vim</a></li>
                        
                    </ul>
                </div>
                
            </div>
        </div>
    </div>
    <footer>Copyright &copy; 2016 dragsubil
        <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p>
	<img src="/img/whitesmall.png" width=20px height=20px /></footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/highlight.pack.js" type="text/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
